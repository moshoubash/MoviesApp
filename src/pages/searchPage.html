<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" type="x-icon" href="../images/popcorn.png" />
    <link rel="stylesheet" href="../styles/trend10.css" />
    <title>Moflex</title>

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../images/movie-logo.png"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap"
      rel="stylesheet"
    />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../styles/app.css" />
    <link rel="stylesheet" href="../styles/searchPage.css" />
  </head>
  <body>
    <!-- Navigation -->
    <div class="nav-wrapper">
      <div class="container">
        <div class="nav">
          <a href="../index.html" class="logo">
            <img src="../images/logo.png" alt="moflix logo" />
          </a>
          <ul class="nav-menu" id="nav-menu">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../pages/aboutus.html">About us</a></li>
            <li><a href="../pages/contactUs.html">Contact Us</a></li>
            <li><a href="../pages/services.html">Services</a></li>
            <li id="nav-auth">
              <a
                href="../pages/Authentication/SignUp.html"
                class="btn btn-hover"
              >
                <span>Sign Up</span>
              </a>
            </li>
          </ul>
          <div class="hamburger-menu" id="hamburger-menu">
            <div class="hamburger"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Section -->
    <section class="search-container">
      <div class="container">
        <h2>Find Your Favorite Movies</h2>
        <div class="search-box-wrapper">
          <input
            type="text"
            id="search-input"
            class="search-box"
            placeholder="Search for a movie..."
            aria-label="Search movies"
          />
          <button id="search-btn" aria-label="Search">Search</button>
        </div>
        <select id="category-filter" aria-label="Filter by category">
          <option value="">All Categories</option>
        </select>
      </div>
    </section>

    <!-- Top Movies -->

    <a href="trend10.html" target="_blank"
      ><div class="container_top_movies">
        <h1 id="title_top_movies">
          Top <span class="main_top_movies">10</span> Movies
        </h1>
        <div id="top10"></div></div
    ></a>

    <!-- Movie Results -->
    <section class="search-results container">
      <h1 class="text-center">Trending Now</h1>
      <div id="movie-results"></div>
    </section>

    <!-- Scripts -->
    <script src="../scripts/searchPage.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script src="../scripts/app.js"></script>
    <script>
      const navAuth = document.getElementById("nav-auth");
      const loggedUser = JSON.parse(localStorage.loggedInUser);

      if (loggedUser && loggedUser.status) {
        navAuth.innerHTML = `
          <a href="profile.html" class="btn btn-hover">
            <span>Profile</span>
          </a>
          <button id="logout" class="btn-danger btn-danger-hover">
            <span>Logout</span>
          </button>
        `;

        document
          .getElementById("logout")
          .addEventListener("click", function () {
            localStorage.removeItem("loggedInUser");
            window.location.href = "/src/pages/searchPage.html"; // Ensure it works for all environments
          });
      }
    </script>
  </body>
</html>
