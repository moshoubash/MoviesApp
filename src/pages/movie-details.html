<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" type="x-icon" href="../images/popcorn.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flix</title>
    <!-- GOOGLE FONTS -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap"
      rel="stylesheet"
    />
    <!-- OWL CAROUSEL -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    />
    <!-- BOX ICONS -->
    <link
      href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
      rel="stylesheet"
    />
    <!-- APP CSS -->
    <link rel="stylesheet" href="../styles/grid.css" />
    <link rel="stylesheet" href="../styles/app.css" />
    <link rel="stylesheet" href="../styles/movie-details.css" />
  </head>
  <body>
    <!-- Navigation -->
    <div class="nav-wrapper">
      <div class="container">
        <div class="nav">
          <a href="../index.html" class="logo">
            <img src="../images/logo.png" alt="moflix logo" />
          </a>
          <ul class="nav-menu" id="nav-menu">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../pages/aboutus.html">About us</a></li>
            <li><a href="../pages/contactUs.html">Contact Us</a></li>
            <li><a href="../pages/services.html">Services</a></li>
            <li><a href="../pages/searchPage.html">Search</a></li>
            <li id="nav-auth">
              <a href="./Authentication/SignUp.html" class="btn btn-hover">
                <span>Sign Up</span>
              </a>
            </li>
          </ul>
          <div class="hamburger-menu" id="hamburger-menu">
            <div class="hamburger"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Movie Details Section -->
    <!-- Movie Details Section -->
    <div class="movie-details-container row">
      <img id="movie-banner" class="col-6" src="" alt="Movie Banner" />
      <div class="movie-content md-col-6">
        <h1 id="movie-title">Movie Details</h1>
        <p id="movie-category" class="movie-category"></p>
        <p id="movie-description"></p>
        <p><strong>Release Date:</strong> <span id="release-date"></span></p>
        <p><strong>Rating:</strong> <span id="rating"></span>/10</p>
        <p><strong>Runtime:</strong> <span id="runtime"></span> mins</p>
        <p><strong>Budget:</strong> $<span id="budget"></span></p>
        <p>
          <strong>Production Companies:</strong>
          <span id="production-companies"></span>
        </p>

        <!-- Favorite Button -->
        <button id="favorite-btn" class="favorite-btn">
          <i class="bx bx-heart"></i>
        </button>
      </div>
    </div>

    <!-- Trailer Section -->
    <div class="trailer-container">
      <h2>Trailer</h2>
      <iframe
        id="movie-trailer"
        width="100%"
        height="400"
        src=""
        frameborder="0"
        allowfullscreen
      ></iframe>
    </div>

    <!-- Cast & Crew Section -->
    <div class="cast-container">
      <h2>Cast & Crew</h2>
      <div id="cast-list" class="row"></div>
    </div>

    <!-- Similar Movies Section -->
    <div class="similar-movies">
      <h2>Similar Movies</h2>
      <div class="owl-carousel" id="similar-movies-list"></div>
    </div>

    <!-- JQUERY -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="../scripts/movieDetailsPage.js"></script>
    <script src="../scripts/app.js"></script>

    <script>
      const navAuth = document.getElementById("nav-auth");
      const loggedUser = JSON.parse(localStorage.loggedInUser);

      if (loggedUser && loggedUser.status) {
        navAuth.innerHTML = `
            <a href="profile.html" class="btn btn-hover">
              <span>Profile</span>
            </a>
            <button id="logout" class="btn-danger btn-danger-hover">
              <span>Logout</span>
            </button>
          `;

        document
          .getElementById("logout")
          .addEventListener("click", function () {
            localStorage.removeItem("loggedInUser");
            window.location.href = "/src/index.html"; // Ensure it works for all environments
          });
      }
    </script>
  </body>
</html>
